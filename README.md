1. Как изменился бы запрос, если бы мы использовали ForeignKey вместо ManyToManyField?
- Если бы связь Book и Genre была через ForeignKey, это означало бы, что каждая книга могла принадлежать только одному жанру, а не нескольким.
- поиск книг, принадлежащих двум жанрам одновременно, уже невозможен
2. Какие проблемы могут возникнуть при использовании ManyToManyField?
- Производительность запросов: в ManyToManyField связь реализуется через промежуточную таблицу (book_genres), поэтому Django выполняет JOIN-запросы к ней. Это может замедлить работу, если база данных очень большая.
- Сложность фильтрации: например, если нужно найти книги, принадлежащие одновременно двум жанрам ("Фантастика" и "Детектив"), запрос становится сложнее:
- Трудности с удалением: если удалить жанр (Genre), нужно убедиться, что связи в ManyToManyField тоже корректно обновлены. Например, при on_delete=models.CASCADE все книги, связанные с этим жанром, не удалятся, но потеряют связь с ним.





